<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Lottery Optimizer</title>
  <style>
    :root{--bg:#fff;--panel:#fafafa;--line:#e6e6e6;--text:#222;--muted:#666;--blue:#1769ff;}
    *{box-sizing:border-box}
    body{margin:0;font:14px/1.45 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);background:var(--bg)}
    h1{margin:20px 20px 10px;font-size:22px}
    h2{margin:18px 0 10px;font-size:18px}
    .wrap{padding:0 20px 40px}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:10px;padding:14px}
    .row{display:grid;gap:14px}
    .row.cols-2{grid-template-columns:1fr 1fr}
    .row.cols-3{grid-template-columns:1fr 1fr 1fr}
    .row.cols-4{grid-template-columns:1fr 1fr 1fr 1fr}
    .stack{display:flex;flex-direction:column;gap:8px}
    label{font-weight:600}
    small{color:var(--muted)}
    input[type="text"], input[type="date"], textarea{width:100%;padding:10px;border:1px solid var(--line);border-radius:8px;background:#fff}
    input[readonly], textarea[readonly]{background:#f6f7fb}
    textarea{min-height:110px;resize:vertical;white-space:pre}
    .btn{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);background:#fff;border-radius:8px;padding:8px 12px;cursor:pointer}
    .btn.primary{background:var(--blue);border-color:var(--blue);color:#fff}
    .btn.small{padding:6px 10px}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .grid-head{display:flex;align-items:center;justify-content:space-between}
    .muted{color:var(--muted)}
    .ok{color:#0a8f3c}
    .danger{color:#b30021}
    .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace}
    @media (max-width:1024px){.row.cols-3,.row.cols-4{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <h1>Lottery Optimizer</h1>
  <div class="wrap">

    <!-- CSV IMPORT -->
    <div class="card stack">
      <div class="grid-head">
        <h2>Bulk import history (CSV)</h2>
        <div class="muted">Overwrite existing data
          <input id="csv_overwrite" type="checkbox" checked>
        </div>
      </div>
      <div class="row cols-4" style="grid-template-columns: 2fr auto auto 1fr;">
        <input id="csv_file" type="file" accept=".csv"/>
        <button id="csv_import" class="btn">Import CSV</button>
        <div></div>
        <pre id="csv_result" class="mono" style="margin:0;height:70px;overflow:auto;background:#0b1020;color:#cde; padding:10px;border-radius:8px"></pre>
      </div>
    </div>

    <!-- PHASE 1 -->
    <h2 style="margin-top:24px">Phase 1 — Evaluation</h2>
    <div class="row cols-2">
      <div class="card stack">
        <div class="grid-head">
          <h3 style="margin:0">The 2nd Newest jackpots — with per-game dates</h3>
          <small class="muted">Format preview: <span class="mono">[[mains…], bonus]</span>, <span class="mono">bonus=null</span> for IL</small>
        </div>

        <!-- Left column: MM / PB -->
        <div class="row cols-2">
          <div class="stack">
            <label>Mega Millions date (MM/DD/YYYY)</label>
            <input id="date_mm" type="date"/>
            <input id="mm_preview" type="text" placeholder="[[..mains..], bonus]" readonly/>
            <button id="btn_get_mm" class="btn small">Retrieve</button>
          </div>

          <div class="stack">
            <label>Powerball date (MM/DD/YYYY)</label>
            <input id="date_pb" type="date"/>
            <input id="pb_preview" type="text" placeholder="[[..mains..], bonus]" readonly/>
            <button id="btn_get_pb" class="btn small">Retrieve</button>
          </div>
        </div>

        <!-- Right column: IL (3 sections) -->
        <div class="card stack" style="padding:10px; background:#fff">
          <div class="muted" style="font-weight:600">IL Lotto — select dates then “Retrieve”</div>

          <div class="row cols-3">
            <div class="stack">
              <label>Jackpot date</label>
              <input id="date_il_jp" type="date"/>
              <input id="il_jp_preview" type="text" placeholder="[[..mains..], null]" readonly/>
              <button id="btn_get_il_jp" class="btn small">Retrieve</button>
            </div>

            <div class="stack">
              <label>Million 1 date</label>
              <input id="date_il_m1" type="date"/>
              <input id="il_m1_preview" type="text" placeholder="[[..mains..], null]" readonly/>
              <button id="btn_get_il_m1" class="btn small">Retrieve</button>
            </div>

            <div class="stack">
              <label>Million 2 date</label>
              <input id="date_il_m2" type="date"/>
              <input id="il_m2_preview" type="text" placeholder="[[..mains..], null]" readonly/>
              <button id="btn_get_il_m2" class="btn small">Retrieve</button>
            </div>
          </div>
        </div>

        <!-- Feeds -->
        <div class="grid-head">
          <h3 style="margin:0">Feeds (Lottery Defeated)</h3>
          <small class="muted">Paste latest feeds when you run</small>
        </div>
        <div class="row cols-3">
          <textarea id="feed_mm" placeholder="FEED_MM&#10;Top 8 hot numbers: ...&#10;Top 8 overdue numbers: ...&#10;Top 3 hot Mega Ball numbers: ...&#10;Top 3 overdue Mega Ball numbers: ..."></textarea>
          <textarea id="feed_pb" placeholder="FEED_PB&#10;Top 8 hot numbers: ...&#10;Top 8 overdue numbers: ...&#10;Top 3 hot Power Ball numbers: ...&#10;Top 3 overdue Power Ball numbers: ..."></textarea>
          <textarea id="feed_il" placeholder="FEED_IL&#10;Top 8 hot numbers: ...&#10;Top 8 overdue numbers: ..."></textarea>
        </div>

        <!-- Run & status -->
        <div class="row cols-3" style="align-items:center">
          <button id="btn_run_phase1" class="btn primary">Run Phase 1</button>
          <input id="phase1_saved_path" type="text" placeholder="Saved Phase-1 path…" readonly/>
          <div id="phase1_msg" class="muted"></div>
        </div>
      </div>

      <!-- History blocks -->
      <div class="card stack">
        <div class="grid-head">
          <h3 style="margin:0">History blobs (top-down, newest first)</h3>
          <small class="muted">Use the 3rd-newest date, then “Load 20 from that date”.</small>
        </div>

        <div class="row cols-3">
          <div class="stack">
            <label>HIST_MM_BLOB</label>
            <div class="row cols-3" style="grid-template-columns: 1fr auto auto;">
              <input id="date_hist_mm" type="date"/>
              <button id="btn_load20_mm" class="btn small">Load 20</button>
            </div>
            <textarea id="hist_mm_blob" placeholder="mm-dd-yy — n1-n2-n3-n4-n5 MB"></textarea>
          </div>

          <div class="stack">
            <label>HIST_PB_BLOB</label>
            <div class="row cols-3" style="grid-template-columns: 1fr auto auto;">
              <input id="date_hist_pb" type="date"/>
              <button id="btn_load20_pb" class="btn small">Load 20</button>
            </div>
            <textarea id="hist_pb_blob" placeholder="mm-dd-yy — n1-n2-n3-n4-n5 PB"></textarea>
          </div>

          <div class="stack">
            <label>HIST_IL_BLOB (JP / M1 / M2)</label>

            <div class="stack" style="gap:6px">
              <small class="muted">JP</small>
              <div class="row cols-3" style="grid-template-columns: 1fr auto auto;">
                <input id="date_hist_il_jp" type="date"/>
                <button id="btn_load20_il_jp" class="btn small">Load 20</button>
              </div>
              <textarea id="hist_il_blob_jp" placeholder="mm-dd-yy — A-B-C-D-E-F"></textarea>

              <small class="muted" style="margin-top:6px">M1</small>
              <div class="row cols-3" style="grid-template-columns: 1fr auto auto;">
                <input id="date_hist_il_m1" type="date"/>
                <button id="btn_load20_il_m1" class="btn small">Load 20</button>
              </div>
              <textarea id="hist_il_blob_m1" placeholder="mm-dd-yy — A-B-C-D-E-F"></textarea>

              <small class="muted" style="margin-top:6px">M2</small>
              <div class="row cols-3" style="grid-template-columns: 1fr auto auto;">
                <input id="date_hist_il_m2" type="date"/>
                <button id="btn_load20_il_m2" class="btn small">Load 20</button>
              </div>
              <textarea id="hist_il_blob_m2" placeholder="mm-dd-yy — A-B-C-D-E-F"></textarea>
            </div>
          </div>
        </div>
      </div>
    </div><!-- /row -->
  </div><!-- /wrap -->

  <script src="/static/app.js"></script>
</body>
</html>
