<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Lottery Optimizer</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    :root { --gap: 14px; --pad: 10px; --bg:#0f172a; --card:#111827; --ink:#e5e7eb; --sub:#9ca3af; --accent:#38bdf8; }
    body { margin:0; background:#0b1020; color:var(--ink); font:14px/1.5 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif; }
    .wrap { max-width:1100px; margin:24px auto; padding:0 14px; }
    h1 { font-size:20px; margin:0 0 10px; }
    h2 { font-size:16px; margin:22px 0 8px; color:#cbd5e1; }
    .row { display:grid; gap:var(--gap); }
    .g-2 { grid-template-columns: 1fr 1fr; }
    .g-3 { grid-template-columns: 1fr 1fr 1fr; }
    .g-4 { grid-template-columns: 1fr 1fr 1fr 1fr; }
    .card { background:var(--card); border:1px solid #1f2937; border-radius:10px; padding:var(--pad); }
    .muted { color:var(--sub); }
    .btn { background:#1f2937; border:1px solid #334155; color:var(--ink); padding:8px 10px; border-radius:8px; cursor:pointer; }
    .btn:hover { border-color:#475569; }
    .btn.primary { background:#0ea5e9; border-color:#38bdf8; color:#001018; font-weight:600; }
    .gridfit { display:grid; grid-template-columns: auto 1fr auto; gap:8px; align-items:center; }
    input[type="text"] { width:100%; background:#0b1020; border:1px solid #334155; color:var(--ink); padding:8px; border-radius:8px; }
    input[type="date"] { width:160px; background:#0b1020; border:1px solid #334155; color:var(--ink); padding:7px; border-radius:8px; }
    textarea { width:100%; min-height:140px; background:#0b1020; border:1px solid #334155; color:var(--ink); padding:8px; border-radius:8px; white-space:pre; }
    pre { background:#0b1020; border:1px solid #334155; padding:10px; border-radius:8px; overflow:auto; }
    .pill { font-size:12px; color:#93c5fd; }
    .cols { display:grid; gap:var(--gap); grid-template-columns: 1fr 1fr; }
    .tiny { font-size:12px; color:#9ca3af; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Lottery Optimizer</h1>

    <!-- CSV upload -->
    <div class="card">
      <h2>Bulk import history (CSV)</h2>
      <div class="gridfit" style="grid-template-columns:1fr auto auto;">
        <input id="csvFile" type="file" accept=".csv"/>
        <label class="muted"><input id="overwrite" type="checkbox" checked> Overwrite existing data</label>
        <button id="btnImport" class="btn">Import CSV</button>
      </div>
      <pre id="importResult" style="margin-top:10px; min-height:48px;"></pre>
    </div>

    <!-- PHASE 1 -->
    <h2 style="margin-top:20px;">Phase 1 — Evaluation</h2>

    <div class="row g-2">
      <!-- Left: MM + PB -->
      <div class="card">
        <div class="muted tiny" style="margin-bottom:6px;">The 2nd Newest jackpots — with per-game dates</div>

        <!-- MM -->
        <div class="gridfit" style="margin-bottom:8px;">
          <span class="pill">Mega Millions date</span>
          <input id="mmDate" type="date" />
          <button class="btn" id="mmFetch">Retrieve</button>
        </div>
        <input id="mmPreview" type="text" placeholder="[[mains..], bonus]" />

        <!-- PB -->
        <div class="gridfit" style="margin:14px 0 8px;">
          <span class="pill">Powerball date</span>
          <input id="pbDate" type="date" />
          <button class="btn" id="pbFetch">Retrieve</button>
        </div>
        <input id="pbPreview" type="text" placeholder="[[mains..], bonus]" />
      </div>

      <!-- Right: IL (JP/M1/M2) -->
      <div class="card">
        <div class="muted tiny" style="margin-bottom:6px;">IL Lotto — select dates then “Retrieve” (bonus is null)</div>

        <!-- IL JP -->
        <div class="gridfit" style="margin-bottom:8px;">
          <span class="pill">Jackpot date</span>
          <input id="ilJPDate" type="date" />
          <button class="btn" id="ilJPFetch">Retrieve</button>
        </div>
        <input id="ilJPPreview" type="text" placeholder="[[mains..], null]" />

        <!-- IL M1 -->
        <div class="gridfit" style="margin:14px 0 8px;">
          <span class="pill">Million 1 date</span>
          <input id="ilM1Date" type="date" />
          <button class="btn" id="ilM1Fetch">Retrieve</button>
        </div>
        <input id="ilM1Preview" type="text" placeholder="[[mains..], null]" />

        <!-- IL M2 -->
        <div class="gridfit" style="margin:14px 0 8px;">
          <span class="pill">Million 2 date</span>
          <input id="ilM2Date" type="date" />
          <button class="btn" id="ilM2Fetch">Retrieve</button>
        </div>
        <input id="ilM2Preview" type="text" placeholder="[[mains..], null]" />
      </div>
    </div>

    <!-- FEEDS (Lottery Defeated) -->
    <div class="row g-3" style="margin-top:14px;">
      <div class="card">
        <div class="pill">FEED_MM</div>
        <textarea id="feedMM" placeholder="Paste latest MM feed..."></textarea>
      </div>
      <div class="card">
        <div class="pill">FEED_PB</div>
        <textarea id="feedPB" placeholder="Paste latest PB feed..."></textarea>
      </div>
      <div class="card">
        <div class="pill">FEED_IL</div>
        <textarea id="feedIL" placeholder="Paste latest IL feed..."></textarea>
      </div>
    </div>

    <!-- HISTORY BLOBS -->
    <div class="row g-3" style="margin-top:14px;">
      <div class="card">
        <div class="gridfit" style="margin-bottom:6px;">
          <span class="pill">HIST_MM_BLOB</span>
          <input id="mmHistFrom" type="date" />
          <button class="btn" id="mmHistLoad">Load 20</button>
        </div>
        <textarea id="mmHist" placeholder="mm-dd-yy  n1-n2-n3-n4-n5  MB"></textarea>
      </div>

      <div class="card">
        <div class="gridfit" style="margin-bottom:6px;">
          <span class="pill">HIST_PB_BLOB</span>
          <input id="pbHistFrom" type="date" />
          <button class="btn" id="pbHistLoad">Load 20</button>
        </div>
        <textarea id="pbHist" placeholder="mm-dd-yy  n1-n2-n3-n4-n5  PB"></textarea>
      </div>

      <div class="card">
        <div class="muted tiny" style="margin-bottom:6px;">HIST_IL_BLOB (JP / M1 / M2) — use the 3rd-newest date for each, then “Load 20”.</div>

        <div class="gridfit" style="margin-bottom:6px;">
          <span class="pill">JP</span>
          <input id="ilJPHistFrom" type="date" />
          <button class="btn" id="ilJPHistLoad">Load 20</button>
        </div>
        <textarea id="ilJPHist" placeholder="mm-dd-yy  A-B-C-D-E-F"></textarea>

        <div class="gridfit" style="margin:12px 0 6px;">
          <span class="pill">M1</span>
          <input id="ilM1HistFrom" type="date" />
          <button class="btn" id="ilM1HistLoad">Load 20</button>
        </div>
        <textarea id="ilM1Hist" placeholder="mm-dd-yy  A-B-C-D-E-F"></textarea>

        <div class="gridfit" style="margin:12px 0 6px;">
          <span class="pill">M2</span>
          <input id="ilM2HistFrom" type="date" />
          <button class="btn" id="ilM2HistLoad">Load 20</button>
        </div>
        <textarea id="ilM2Hist" placeholder="mm-dd-yy  A-B-C-D-E-F"></textarea>
      </div>
    </div>

    <!-- RUN PHASE 1 -->
    <div class="row g-2" style="margin-top:14px;">
      <div class="card">
        <button id="runPhase1" class="btn primary">Run Phase 1</button>
        <span class="tiny" style="margin-left:8px;">Saved path:</span>
        <input id="phase1Path" type="text" readonly />
      </div>
      <div class="card">
        <div class="pill">Phase 1 — Results</div>
        <pre id="phase1Result" style="min-height:90px;"></pre>
      </div>
    </div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
