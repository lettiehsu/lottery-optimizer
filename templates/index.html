<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Lottery Optimizer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <h1>Lottery Optimizer</h1>

  <!-- Bulk import -->
  <div class="card">
    <div class="inline">
      <div>
        <div class="pill">Bulk import history (CSV)</div>
        <small>Headers: game,draw_date,tier,n1,n2,n3,n4,n5,bonus</small>
      </div>
      <label class="switch">
        <input type="checkbox" id="overwriteCsv" checked />
        <span>Overwrite existing data</span>
      </label>
      <button id="btnCsv" class="btn">Import CSV</button>
    </div>
    <div class="row g-8 mt">
      <input type="file" id="csvFile" />
      <pre id="csvLog" class="log mono" style="min-height:64px"></pre>
    </div>
  </div>

  <!-- Phase 1 — Evaluation -->
  <div class="card">
    <div class="pill">Phase 1 — Evaluation</div>

    <div class="grid grid-2 mt">
      <div>
        <div class="tiny muted">The 2nd Newest jackpots — with per-game dates</div>
        <div class="field mt-6">
          <label>Mega Millions date</label>
          <input id="mmDate" type="text" placeholder="MM/DD/YYYY" />
          <button id="mmRetrieve" class="btn">Retrieve</button>
          <textarea id="mmPreview" class="mono" rows="2" placeholder="[[mains..], bonus]"></textarea>
        </div>
        <div class="field">
          <label>Powerball date</label>
          <input id="pbDate" type="text" placeholder="MM/DD/YYYY" />
          <button id="pbRetrieve" class="btn">Retrieve</button>
          <textarea id="pbPreview" class="mono" rows="2" placeholder="[[mains..], bonus]"></textarea>
        </div>
        <div class="field">
          <label>IL Lotto — Jackpot</label>
          <input id="ilJPDate" type="text" placeholder="MM/DD/YYYY" />
          <button id="ilJPRetrieve" class="btn">Retrieve</button>
          <textarea id="ilJPPreview" class="mono" rows="2" placeholder="[[mains..], null]"></textarea>
        </div>
        <div class="field">
          <label>IL Lotto — Million 1</label>
          <input id="ilM1Date" type="text" placeholder="MM/DD/YYYY" />
          <button id="ilM1Retrieve" class="btn">Retrieve</button>
          <textarea id="ilM1Preview" class="mono" rows="2" placeholder="[[mains..], null]"></textarea>
        </div>
        <div class="field">
          <label>IL Lotto — Million 2</label>
          <input id="ilM2Date" type="text" placeholder="MM/DD/YYYY" />
          <button id="ilM2Retrieve" class="btn">Retrieve</button>
          <textarea id="ilM2Preview" class="mono" rows="2" placeholder="[[mains..], null]"></textarea>
        </div>
      </div>

      <div>
        <div class="tiny muted">Feeds (Lottery Defeated) — paste the most recent feeds when you run</div>
        <div class="grid grid-3 mt">
          <textarea id="FEED_MM" class="mono" rows="8" placeholder="FEED_MM…"></textarea>
          <textarea id="FEED_PB" class="mono" rows="8" placeholder="FEED_PB…"></textarea>
          <textarea id="FEED_IL" class="mono" rows="8" placeholder="FEED_IL…"></textarea>
        </div>
      </div>
    </div>

    <div class="card subtle mt">
      <div class="tiny muted">History (use 3rd newest date → “Load 20”)</div>
      <div class="grid grid-3">
        <div>
          <label>HIST_MM_BLOB start date</label>
          <div class="inline">
            <input id="mmHistDate" type="text" placeholder="MM/DD/YYYY" />
            <button id="mmLoad20" class="btn">Load 20</button>
          </div>
          <textarea id="HIST_MM_BLOB" class="mono" rows="10" placeholder="mm-dd-yy  n1-n2-n3-n4-n5  MB"></textarea>
        </div>
        <div>
          <label>HIST_PB_BLOB start date</label>
          <div class="inline">
            <input id="pbHistDate" type="text" placeholder="MM/DD/YYYY" />
            <button id="pbLoad20" class="btn">Load 20</button>
          </div>
          <textarea id="HIST_PB_BLOB" class="mono" rows="10" placeholder="mm-dd-yy  n1-n2-n3-n4-n5  PB"></textarea>
        </div>
        <div>
          <label>HIST_IL_BLOB (JP / M1 / M2)</label>
          <div class="grid grid-3">
            <div>
              <div class="inline">
                <input id="ilJPHistDate" type="text" placeholder="MM/DD/YYYY" />
                <button id="ilJPLoad20" class="btn">Load 20</button>
              </div>
              <textarea id="HIST_IL_JP_BLOB" class="mono" rows="8" placeholder="mm-dd-yy  A-B-C-D-E-F"></textarea>
            </div>
            <div>
              <div class="inline">
                <input id="ilM1HistDate" type="text" placeholder="MM/DD/YYYY" />
                <button id="ilM1Load20" class="btn">Load 20</button>
              </div>
              <textarea id="HIST_IL_M1_BLOB" class="mono" rows="8" placeholder="mm-dd-yy  A-B-C-D-E-F"></textarea>
            </div>
            <div>
              <div class="inline">
                <input id="ilM2HistDate" type="text" placeholder="MM/DD/YYYY" />
                <button id="ilM2Load20" class="btn">Load 20</button>
              </div>
              <textarea id="HIST_IL_M2_BLOB" class="mono" rows="8" placeholder="mm-dd-yy  A-B-C-D-E-F"></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Run Phase 1 -->
    <div class="inline mt">
      <button id="runPhase1" class="btn primary">Run Phase 1</button>
      <span class="tiny muted" style="margin-left:8px;">Saved path:</span>
      <input id="phase1Path" type="text" readonly />
      <span id="phase1Done" class="pill" style="display:none;">Done</span>
    </div>

    <!-- Phase 1 results -->
    <div id="phase1ResultsRow" class="grid grid-3 mt">
      <div class="card">
        <div class="inline"><span class="pill">Mega Millions — 50 rows</span><span id="mmCounts" class="tiny right"></span></div>
        <div class="two-col mt-6">
          <div><div class="tiny muted">Batch</div><ol id="mmBatch" class="batch mono"></ol></div>
          <div>
            <div class="tiny muted">Stats</div><div id="mmStats" class="statline mt-6"></div>
            <div class="tiny muted" style="margin-top:8px;">Row indices</div><pre id="mmRows" class="mono" style="min-height:100px"></pre>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="inline"><span class="pill">Powerball — 50 rows</span><span id="pbCounts" class="tiny right"></span></div>
        <div class="two-col mt-6">
          <div><div class="tiny muted">Batch</div><ol id="pbBatch" class="batch mono"></ol></div>
          <div>
            <div class="tiny muted">Stats</div><div id="pbStats" class="statline mt-6"></div>
            <div class="tiny muted" style="margin-top:8px;">Row indices</div><pre id="pbRows" class="mono" style="min-height:100px"></pre>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="inline"><span class="pill">IL Lotto — 50 rows</span><span id="ilCounts" class="tiny right"></span></div>
        <div class="two-col mt-6">
          <div><div class="tiny muted">Batch</div><ol id="ilBatch" class="batch mono"></ol></div>
          <div>
            <div class="tiny muted">Stats</div><div id="ilStats" class="statline mt-6"></div>
            <div class="tiny muted" style="margin-top:8px;">Row indices</div><pre id="ilRows" class="mono" style="min-height:100px"></pre>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Phase 2 — Prediction -->
  <div class="card">
    <div class="pill">Phase 2 — Prediction (100 runs → stats → Buy List)</div>

    <div class="grid grid-3 mt">
      <div>
        <div class="tiny muted">Inputs</div>
        <small>Phase 2 uses the same FEED_* and HIST_* already loaded.</small>
        <div class="mt-6 tiny muted">No draw date needed here.</div>
      </div>
      <div>
        <div class="tiny muted">Notes</div>
        <ul class="tiny">
          <li>Runs 100 simulations per game using your sampling patterns.</li>
          <li>Aggregates hit counts + row indices.</li>
          <li>Produces 10 (MM), 10 (PB), 15 (IL) suggested tickets.</li>
        </ul>
      </div>
      <div>
        <div class="tiny muted">Controls</div>
        <div class="inline mt-6">
          <button id="runPhase2" class="btn primary">Run Phase 2 (100)</button>
          <span class="tiny muted" style="margin-left:8px;">Saved path:</span>
          <input id="phase2Path" type="text" readonly />
          <button id="copyBuy" class="btn">Copy Buy List</button>
        </div>
      </div>
    </div>

    <!-- Phase 2 results -->
    <div id="phase2Results" class="grid grid-3 mt">
      <div class="card">
        <div class="pill">Mega Millions</div>
        <div class="tiny muted">Stats</div>
        <pre id="p2MMStats" class="mono" style="min-height:80px"></pre>
        <div class="tiny muted">Row indices</div>
        <pre id="p2MMRows" class="mono" style="min-height:80px"></pre>
        <div class="tiny muted">Buy List (10)</div>
        <pre id="p2MMBuy" class="mono" style="min-height:80px"></pre>
      </div>
      <div class="card">
        <div class="pill">Powerball</div>
        <div class="tiny muted">Stats</div>
        <pre id="p2PBStats" class="mono" style="min-height:80px"></pre>
        <div class="tiny muted">Row indices</div>
        <pre id="p2PBRows" class="mono" style="min-height:80px"></pre>
        <div class="tiny muted">Buy List (10)</div>
        <pre id="p2PBBuy" class="mono" style="min-height:80px"></pre>
      </div>
      <div class="card">
        <div class="pill">IL Lotto</div>
        <div class="tiny muted">Stats</div>
        <pre id="p2ILStats" class="mono" style="min-height:80px"></pre>
        <div class="tiny muted">Row indices</div>
        <pre id="p2ILRows" class="mono" style="min-height:80px"></pre>
        <div class="tiny muted">Buy List (15)</div>
        <pre id="p2ILBuy" class="mono" style="min-height:80px"></pre>
      </div>
    </div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
