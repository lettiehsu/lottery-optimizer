<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Lottery Optimizer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="/static/styles.css" rel="stylesheet" />
</head>
<body>
  <div class="app">

    <h1>Lottery Optimizer</h1>

    <!-- ========== CSV IMPORT ========== -->
    <div class="card">
      <div class="inline">
        <div class="title">Bulk import history (CSV)</div>
        <label class="checkbox">
          <input id="overwrite" type="checkbox" />
          <span>Overwrite existing data</span>
        </label>
      </div>
      <div class="row g8">
        <input id="csvFile" type="file" />
        <button id="btnImport" class="btn">Import CSV</button>
      </div>
      <pre id="importLog" class="log mt"></pre>
    </div>

    <!-- ========== PHASE 1 — EVALUATION ========== -->
    <div class="card">
      <div class="title">Phase 1 — Evaluation</div>

      <div class="grid grid-2">
        <!-- Left: per-game 2nd newest with preview -->
        <div class="panel">
          <div class="subhead">The 2nd Newest jackpots — with per-game dates</div>

          <div class="grid grid-2 g12">
            <div>
              <label class="tiny muted">Mega Millions date (MM/DD/YYYY)</label>
              <div class="row g8">
                <input id="mmDate" type="text" placeholder="MM/DD/YYYY" />
                <button id="mmRetrieve" class="btn">Retrieve</button>
              </div>
              <textarea id="mmPreview" rows="3" class="mono" placeholder="[[mains..], bonus]"></textarea>
            </div>

            <div>
              <label class="tiny muted">Powerball date (MM/DD/YYYY)</label>
              <div class="row g8">
                <input id="pbDate" type="text" placeholder="MM/DD/YYYY" />
                <button id="pbRetrieve" class="btn">Retrieve</button>
              </div>
              <textarea id="pbPreview" rows="3" class="mono" placeholder="[[mains..], bonus]"></textarea>
            </div>
          </div>

          <div class="subhead mt">IL Lotto — select dates then “Retrieve” (bonus is null)</div>
          <div class="grid grid-3 g12">
            <div>
              <label class="tiny muted">Jackpot date</label>
              <div class="row g8">
                <input id="ilJPDate" type="text" placeholder="MM/DD/YYYY" />
                <button id="ilJPRetrieve" class="btn">Retrieve</button>
              </div>
              <textarea id="ilJPPreview" rows="2" class="mono" placeholder="[[mains..], null]"></textarea>
            </div>
            <div>
              <label class="tiny muted">Million 1 date</label>
              <div class="row g8">
                <input id="ilM1Date" type="text" placeholder="MM/DD/YYYY" />
                <button id="ilM1Retrieve" class="btn">Retrieve</button>
              </div>
              <textarea id="ilM1Preview" rows="2" class="mono" placeholder="[[mains..], null]"></textarea>
            </div>
            <div>
              <label class="tiny muted">Million 2 date</label>
              <div class="row g8">
                <input id="ilM2Date" type="text" placeholder="MM/DD/YYYY" />
                <button id="ilM2Retrieve" class="btn">Retrieve</button>
              </div>
              <textarea id="ilM2Preview" rows="2" class="mono" placeholder="[[mains..], null]"></textarea>
            </div>
          </div>

          <div class="subhead mt">Feeds (Lottery Defeated) — paste the most recent feeds when you run</div>
          <div class="grid grid-3 g12">
            <textarea id="feedMM" rows="6" class="mono" placeholder="FEED_MM…"></textarea>
            <textarea id="feedPB" rows="6" class="mono" placeholder="FEED_PB…"></textarea>
            <textarea id="feedIL" rows="6" class="mono" placeholder="FEED_IL…"></textarea>
          </div>
        </div>

        <!-- Right: History “Load 20” -->
        <div class="panel">
          <div class="subhead">History (use 3rd newest date → “Load 20”)</div>

          <div class="grid grid-2 g12">
            <div>
              <label class="tiny muted">HIST_MM_BLOB start date</label>
              <div class="row g8">
                <input id="mmHistDate" type="text" placeholder="MM/DD/YYYY" />
                <button id="mmLoad20" class="btn">Load 20</button>
              </div>
              <textarea id="mmHist" rows="10" class="mono" placeholder="20 rows…"></textarea>
            </div>

            <div>
              <label class="tiny muted">HIST_PB_BLOB start date</label>
              <div class="row g8">
                <input id="pbHistDate" type="text" placeholder="MM/DD/YYYY" />
                <button id="pbLoad20" class="btn">Load 20</button>
              </div>
              <textarea id="pbHist" rows="10" class="mono" placeholder="20 rows…"></textarea>
            </div>
          </div>

          <div class="grid grid-3 g12 mt">
            <div>
              <label class="tiny muted">IL JP start date</label>
              <div class="row g8">
                <input id="ilJPHistDate" type="text" placeholder="MM/DD/YYYY" />
                <button id="ilJPLoad20" class="btn">Load 20</button>
              </div>
              <textarea id="ilJPHist" rows="8" class="mono" placeholder="20 rows…"></textarea>
            </div>
            <div>
              <label class="tiny muted">IL M1 start date</label>
              <div class="row g8">
                <input id="ilM1HistDate" type="text" placeholder="MM/DD/YYYY" />
                <button id="ilM1Load20" class="btn">Load 20</button>
              </div>
              <textarea id="ilM1Hist" rows="8" class="mono" placeholder="20 rows…"></textarea>
            </div>
            <div>
              <label class="tiny muted">IL M2 start date</label>
              <div class="row g8">
                <input id="ilM2HistDate" type="text" placeholder="MM/DD/YYYY" />
                <button id="ilM2Load20" class="btn">Load 20</button>
              </div>
              <textarea id="ilM2Hist" rows="8" class="mono" placeholder="20 rows…"></textarea>
            </div>
          </div>
        </div>
      </div>

      <!-- Run Phase 1 -->
      <div class="row g8 mt">
        <button id="runPhase1" class="btn primary">Run Phase 1</button>
        <span class="tiny muted">Saved path:</span>
        <input id="phase1Path" type="text" readonly />
        <span id="runDone" class="tiny muted"></span>
      </div>

      <!-- Pretty results: three columns -->
      <div id="phase1ResultsRow" class="grid grid-3 mt">
        <!-- MM -->
        <div class="card soft">
          <div class="inline">
            <span class="pill">Mega Millions — 50 rows</span>
            <span id="mmCounts" class="tiny right"></span>
          </div>
          <div class="two-col mt8">
            <div>
              <div class="tiny muted">Batch</div>
              <ol id="mmBatch" class="batch mono"></ol>
            </div>
            <div>
              <div class="tiny muted">Stats</div>
              <div id="mmStats" class="statline mb8"></div>
              <div class="tiny muted">Row indices</div>
              <pre id="mmRows" class="mono min100"></pre>
            </div>
          </div>
        </div>

        <!-- PB -->
        <div class="card soft">
          <div class="inline">
            <span class="pill">Powerball — 50 rows</span>
            <span id="pbCounts" class="tiny right"></span>
          </div>
          <div class="two-col mt8">
            <div>
              <div class="tiny muted">Batch</div>
              <ol id="pbBatch" class="batch mono"></ol>
            </div>
            <div>
              <div class="tiny muted">Stats</div>
              <div id="pbStats" class="statline mb8"></div>
              <div class="tiny muted">Row indices</div>
              <pre id="pbRows" class="mono min100"></pre>
            </div>
          </div>
        </div>

        <!-- IL -->
        <div class="card soft">
          <div class="inline">
            <span class="pill">IL Lotto — 50 rows</span>
            <span id="ilCounts" class="tiny right"></span>
          </div>
          <div class="two-col mt8">
            <div>
              <div class="tiny muted">Batch</div>
              <ol id="ilBatch" class="batch mono"></ol>
            </div>
            <div>
              <div class="tiny muted">Stats</div>
              <div id="ilStats" class="statline mb8"></div>
              <div class="tiny muted">Row indices</div>
              <pre id="ilRows" class="mono min100"></pre>
            </div>
          </div>
        </div>
      </div>

      <!-- Raw debug (collapsible) -->
      <details class="mt">
        <summary>Raw Phase-1 JSON (debug)</summary>
        <pre id="phase1Debug" class="mono min140"></pre>
      </details>
    </div>

    <!-- Toasts -->
    <div id="toasts"></div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
