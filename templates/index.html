<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>{{ app_name }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="/static/style.css"/>
</head>
<body>
  <main class="wrap">
    <h1>{{ app_name }}</h1>

    <section class="card">
      <h2>Bulk import history (CSV)</h2>
      <form id="csvForm">
        <input type="file" id="csvFile" accept=".csv"/>
        <label><input type="checkbox" id="csvOverwrite" checked/> Overwrite existing data</label>
        <button type="submit">Import CSV</button>
      </form>
      <div id="csvMeta" class="muted mt-sm"></div>
    </section>

    <section class="card">
      <h2>Phase 1 — Evaluation</h2>
      <p class="muted">Pick dates, show Top 3, set the <b>2nd newest</b> for NJ. Load 20 using the <b>3rd newest</b> as cutoff. Paste feeds and run.</p>

      <div class="grid-2">
        <div>
          <h3>The 2nd Newest jackpots — with per-game dates</h3>

          <div class="grid-2 tight">
            <div>
              <label class="lbl">Mega Million (date ≤)</label>
              <input id="date_mm_nj" placeholder="MM/DD/YYYY"/>
              <div class="row">
                <button id="btn_get_mm_top3" class="ghost">Show Top 3 (≤ date)</button>
                <button id="btn_get_mm_nj" class="ghost">Use 2nd Newest → LATEST_MM</button>
              </div>
              <pre id="preview_mm_top3" class="mini"></pre>
              <pre id="preview_mm_nj" class="mini"></pre>
            </div>
            <div>
              <label class="lbl">Powerball (date ≤)</label>
              <input id="date_pb_nj" placeholder="MM/DD/YYYY"/>
              <div class="row">
                <button id="btn_get_pb_top3" class="ghost">Show Top 3 (≤ date)</button>
                <button id="btn_get_pb_nj" class="ghost">Use 2nd Newest → LATEST_PB</button>
              </div>
              <pre id="preview_pb_top3" class="mini"></pre>
              <pre id="preview_pb_nj" class="mini"></pre>
            </div>
          </div>

          <div class="grid-3 tight">
            <div>
              <label class="lbl">IL Lotto — JP (date ≤)</label>
              <input id="date_il_jp_nj" placeholder="MM/DD/YYYY"/>
              <div class="row">
                <button id="btn_get_il_jp_top3" class="ghost">Show Top 3</button>
                <button id="btn_get_il_jp_nj" class="ghost">Use 2nd → LATEST_IL_JP</button>
              </div>
              <pre id="preview_il_jp_top3" class="mini"></pre>
              <pre id="preview_il_jp_nj" class="mini"></pre>
            </div>
            <div>
              <label class="lbl">IL Lotto — M1 (date ≤)</label>
              <input id="date_il_m1_nj" placeholder="MM/DD/YYYY"/>
              <div class="row">
                <button id="btn_get_il_m1_top3" class="ghost">Show Top 3</button>
                <button id="btn_get_il_m1_nj" class="ghost">Use 2nd → LATEST_IL_M1</button>
              </div>
              <pre id="preview_il_m1_top3" class="mini"></pre>
              <pre id="preview_il_m1_nj" class="mini"></pre>
            </div>
            <div>
              <label class="lbl">IL Lotto — M2 (date ≤)</label>
              <input id="date_il_m2_nj" placeholder="MM/DD/YYYY"/>
              <div class="row">
                <button id="btn_get_il_m2_top3" class="ghost">Show Top 3</button>
                <button id="btn_get_il_m2_nj" class="ghost">Use 2nd → LATEST_IL_M2</button>
              </div>
              <pre id="preview_il_m2_top3" class="mini"></pre>
              <pre id="preview_il_m2_nj" class="mini"></pre>
            </div>
          </div>
        </div>

        <div>
          <h3>Feeds (paste from “Lottery Defeated”)</h3>
          <textarea id="FEED_MM" placeholder="Paste latest MM feed...">{{ defaults.FEED_MM|trim }}</textarea>
          <textarea id="FEED_PB" placeholder="Paste latest PB feed...">{{ defaults.FEED_PB|trim }}</textarea>
          <textarea id="FEED_IL" placeholder="Paste latest IL feed...">{{ defaults.FEED_IL|trim }}</textarea>
        </div>
      </div>

      <h3>History blobs (top-down, newest first)</h3>
      <div class="grid-3">
        <div>
          <div class="row">
            <input id="date_mm_hist" placeholder="MM/DD/YYYY"/>
            <button id="btn_mm_hist" class="ghost">Load 20 (3rd newest cutoff)</button>
          </div>
          <textarea id="HIST_MM_BLOB" placeholder="n1-n2-n3-n4-n5 MB">{{ defaults.HIST_MM_BLOB|trim }}</textarea>
        </div>
        <div>
          <div class="row">
            <input id="date_pb_hist" placeholder="MM/DD/YYYY"/>
            <button id="btn_pb_hist" class="ghost">Load 20 (3rd newest cutoff)</button>
          </div>
          <textarea id="HIST_PB_BLOB" placeholder="n1-n2-n3-n4-n5 PB">{{ defaults.HIST_PB_BLOB|trim }}</textarea>
        </div>
        <div>
          <label class="muted">Use the <b>3rd
