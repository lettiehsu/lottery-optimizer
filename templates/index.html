<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Lottery Optimizer</title>
  <link rel="stylesheet" href="/static/styles.css"/>
</head>
<body>
  <h1>Lottery Optimizer</h1>

  <!-- CSV import -->
  <div class="card">
    <div class="inline">
      <strong>Bulk import history (CSV)</strong>
      <label class="right small">
        <input type="checkbox" id="overwriteCsv" checked/>
        Overwrite existing data
      </label>
    </div>
    <div class="row">
      <input type="file" id="csvFile" />
      <button id="importCsv" class="btn">Import CSV</button>
    </div>
    <pre id="csvLog" class="log"></pre>
  </div>

  <!-- Phase 1 inputs -->
  <div class="card">
    <div class="pill">Phase 1 — Evaluation</div>

    <div class="grid grid-2">
      <!-- The 2nd Newest jackpots — with per-game dates -->
      <div class="card subtle">
        <div class="tiny muted">The 2nd Newest jackpots — with per-game dates</div>

        <label class="tiny">Mega Millions date (MM/DD/YYYY)</label>
        <div class="row">
          <input id="mmDate" type="text" placeholder="MM/DD/YYYY"/>
          <button id="mmRetrieve" class="btn">Retrieve</button>
        </div>
        <textarea id="mmPreview" rows="2" placeholder="[[mains..], bonus]"></textarea>

        <label class="tiny">Powerball date (MM/DD/YYYY)</label>
        <div class="row">
          <input id="pbDate" type="text" placeholder="MM/DD/YYYY"/>
          <button id="pbRetrieve" class="btn">Retrieve</button>
        </div>
        <textarea id="pbPreview" rows="2" placeholder="[[mains..], bonus]"></textarea>
      </div>

      <!-- IL Lotto -->
      <div class="card subtle">
        <div class="tiny muted">IL Lotto — select dates then “Retrieve” (bonus is null)</div>

        <label class="tiny">Jackpot date</label>
        <div class="row">
          <input id="ilJPDate" type="text" placeholder="MM/DD/YYYY"/>
          <button id="ilJPRetrieve" class="btn">Retrieve</button>
        </div>
        <textarea id="ilJPPreview" rows="2" placeholder="[[mains..], null]"></textarea>

        <label class="tiny">Million 1 date</label>
        <div class="row">
          <input id="ilM1Date" type="text" placeholder="MM/DD/YYYY"/>
          <button id="ilM1Retrieve" class="btn">Retrieve</button>
        </div>
        <textarea id="ilM1Preview" rows="2" placeholder="[[mains..], null]"></textarea>

        <label class="tiny">Million 2 date</label>
        <div class="row">
          <input id="ilM2Date" type="text" placeholder="MM/DD/YYYY"/>
          <button id="ilM2Retrieve" class="btn">Retrieve</button>
        </div>
        <textarea id="ilM2Preview" rows="2" placeholder="[[mains..], null]"></textarea>
      </div>
    </div>

    <!-- Feeds -->
    <div class="grid grid-3">
      <div class="card subtle">
        <div class="tiny muted">FEED_MM</div>
        <textarea id="feedMM" rows="5" placeholder="Paste latest MM feed…"></textarea>
      </div>
      <div class="card subtle">
        <div class="tiny muted">FEED_PB</div>
        <textarea id="feedPB" rows="5" placeholder="Paste latest PB feed…"></textarea>
      </div>
      <div class="card subtle">
        <div class="tiny muted">FEED_IL</div>
        <textarea id="feedIL" rows="5" placeholder="Paste latest IL feed…"></textarea>
      </div>
    </div>

    <!-- History (3rd newest + Load 20) -->
    <div class="card">
      <div class="tiny muted">History (use the 3rd-newest date → “Load 20”)</div>
      <div class="grid grid-3">
        <div>
          <label class="tiny">HIST_MM_BLOB start date</label>
          <div class="row">
            <input id="histMMDate" type="text" placeholder="MM/DD/YYYY"/>
            <button id="mmLoad20" class="btn">Load 20</button>
          </div>
          <textarea id="histMMBlob" rows="8" class="mono" placeholder="mm-dd-yy  n1-n2-n3-n4-n5  MB"></textarea>
        </div>
        <div>
          <label class="tiny">HIST_PB_BLOB start date</label>
          <div class="row">
            <input id="histPBDate" type="text" placeholder="MM/DD/YYYY"/>
            <button id="pbLoad20" class="btn">Load 20</button>
          </div>
          <textarea id="histPBBlob" rows="8" class="mono" placeholder="mm-dd-yy  n1-n2-n3-n4-n5  PB"></textarea>
        </div>
        <div>
          <label class="tiny">HIST_IL_BLOB (JP / M1 / M2)</label>
          <div class="grid grid-3 compact">
            <div>
              <div class="row">
                <input id="histILJPDate" type="text" placeholder="MM/DD/YYYY"/>
                <button id="ilJPLoad20" class="btn">Load 20</button>
              </div>
              <textarea id="histILJPBlob" rows="8" class="mono" placeholder="mm-dd-yy  A-B-C-D-E-F"></textarea>
            </div>
            <div>
              <div class="row">
                <input id="histILM1Date" type="text" placeholder="MM/DD/YYYY"/>
                <button id="ilM1Load20" class="btn">Load 20</button>
              </div>
              <textarea id="histILM1Blob" rows="8" class="mono" placeholder="mm-dd-yy  A-B-C-D-E-F"></textarea>
            </div>
            <div>
              <div class="row">
                <input id="histILM2Date" type="text" placeholder="MM/DD/YYYY"/>
                <button id="ilM2Load20" class="btn">Load 20</button>
              </div>
              <textarea id="histILM2Blob" rows="8" class="mono" placeholder="mm-dd-yy  A-B-C-D-E-F"></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Run Phase 1 -->
    <div class="row">
      <button id="runPhase1" class="btn primary">Run Phase 1</button>
      <input id="phase1Path" type="text" readonly placeholder="Saved path…"/>
      <span id="doneBadge" class="pill success" style="display:none">Done</span>
    </div>

    <!-- PHASE 1 RESULTS: three columns -->
    <div id="phase1ResultsRow" class="grid grid-3" style="margin-top:12px">
      <!-- MM -->
      <div class="card">
        <div class="inline">
          <span class="pill">Mega Millions — 50 rows</span>
          <span id="mmCounts" class="tiny right"></span>
        </div>
        <div class="two-col">
          <div>
            <div class="tiny muted">Batch</div>
            <ol id="mmBatch" class="batch mono"></ol>
          </div>
          <div>
            <div class="tiny muted">Stats</div>
            <div id="mmStats" class="statline"></div>
            <div class="tiny muted">Row indices</div>
            <pre id="mmRows" class="mono" style="min-height:100px"></pre>
          </div>
        </div>
      </div>
      <!-- PB -->
      <div class="card">
        <div class="inline">
          <span class="pill">Powerball — 50 rows</span>
          <span id="pbCounts" class="tiny right"></span>
        </div>
        <div class="two-col">
          <div>
            <div class="tiny muted">Batch</div>
            <ol id="pbBatch" class="batch mono"></ol>
          </div>
          <div>
            <div class="tiny muted">Stats</div>
            <div id="pbStats" class="statline"></div>
            <div class="tiny muted">Row indices</div>
            <pre id="pbRows" class="mono" style="min-height:100px"></pre>
          </div>
        </div>
      </div>
      <!-- IL -->
      <div class="card">
        <div class="inline">
          <span class="pill">IL Lotto — 50 rows</span>
          <span id="ilCounts" class="tiny right"></span>
        </div>
        <div class="two-col">
          <div>
            <div class="tiny muted">Batch</div>
            <ol id="ilBatch" class="batch mono"></ol>
          </div>
          <div>
            <div class="tiny muted">Stats</div>
            <div id="ilStats" class="statline"></div>
            <div class="tiny muted">Row indices</div>
            <pre id="ilRows" class="mono" style="min-height:100px"></pre>
          </div>
        </div>
      </div>
    </div>

    <details class="mt">
      <summary>Raw Phase-1 JSON (debug)</summary>
      <pre id="rawPhase1"></pre>
    </details>
  </div>

  <div id="toast" class="toast" style="display:none"></div>

  <script src="/static/app.js"></script>
</body>
</html>
